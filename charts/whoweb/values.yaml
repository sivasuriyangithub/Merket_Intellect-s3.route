# This is a YAML-formatted file.
# Declare variables to be passed into your templates.
image:
  pullPolicy: IfNotPresent
  repository:
  tag:
basedomain: whoknows.com
service:
  name: whoweb
  type: ClusterIP
  ports:
    - name: http
      port: 80
      targetPort: 5000
  sessionAffinity: ClientIP
  externalPort: 80
  paths: "/ww/"
deployment:
  envConfigMapRef: "whoweb-config"
  envSecretRef: "whoweb-secrets"
  reloadOnEnvChange: 1
  readinessProbe:
    httpGet:
      path: /readiness
      port: 5000
      initialDelaySeconds: 20
      timeoutSeconds: 5
  livenessProbe:
    httpGet:
      path: /liveness
      port: 5000
  strategy:
    rollingUpdate:
      maxSurge: 51%
      maxUnavailable: 25%
hpa:
  minReplicas: 1
  maxReplicas: 10
  metrics:
  - type: Resource
    resource:
      name: cpu
      targetAverageUtilization: 60
  - type: Resource
    resource:
      name: memory
      targetAverageUtilization: 80
resources:
  requests:
    cpu: "500m"
    memory: "1Gi"
preview:
  required-by:
    xperweb: true
